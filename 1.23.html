<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debt Payoff Pro | Advanced Calculator</title>
    <style>
        :root {
            --primary-color: #4e73df;
            --secondary-color: #2e59d9;
            --accent-color: #f6c23e;
            --text-color: #333;
            --light-text: #6c757d;
            --bg-color: #f8f9fc;
            --card-bg: #fff;
            --border-color: #e3e6f0;
            --shadow-color: rgba(58, 59, 69, 0.15);
            --error-color: #e74a3b;
            --success-color: #1cc88a;
            --warning-color: #f6c23e;
        }

        .dark-mode {
            --primary-color: #4e73df;
            --secondary-color: #2e59d9;
            --text-color: #f8f9fc;
            --light-text: #b7b9cc;
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --border-color: #2a2a4a;
            --shadow-color: rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            color: var(--primary-color);
            font-size: 2rem;
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        @media (min-width: 992px) {
            .main-content {
                grid-template-columns: 1fr 1fr;
            }
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0.15rem 1.75rem 0 var(--shadow-color);
            margin-bottom: 20px;
        }

        .card h2 {
            margin-bottom: 20px;
            color: var(--primary-color);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h2 i {
            font-size: 1.3rem;
        }

        .form-group {
            margin-bottom: 15px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .form-control {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            background-color: var(--card-bg);
            color: var(--text-color);
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .input-group {
            display: flex;
            gap: 10px;
        }

        .input-group .form-control {
            flex: 1;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: var(--primary-color);
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            background-color: var(--secondary-color);
        }

        .btn-secondary {
            background-color: #6c757d;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
        }

        .btn-success {
            background-color: var(--success-color);
        }

        .btn-success:hover {
            background-color: #17a673;
        }

        .btn-warning {
            background-color: var(--warning-color);
            color: #000;
        }

        .btn-warning:hover {
            background-color: #dda20a;
        }

        .result-container {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            background-color: rgba(78, 115, 223, 0.1);
            border-left: 4px solid var(--primary-color);
        }

        .result-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 10px 0;
            color: var(--primary-color);
        }

        .result-details {
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.8;
        }

        .result-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .result-item {
            padding: 10px;
            border-radius: 5px;
            background-color: rgba(255, 255, 255, 0.1);
        }

        .result-item h3 {
            font-size: 0.9rem;
            color: var(--light-text);
            margin-bottom: 5px;
        }

        .result-item p {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .ad-container {
            margin: 20px 0;
            padding: 15px;
            background-color: var(--card-bg);
            border-radius: 5px;
            text-align: center;
            border: 1px dashed var(--border-color);
        }

        .ad-label {
            font-size: 0.8rem;
            color: var(--text-color);
            opacity: 0.6;
            margin-bottom: 5px;
        }

        .error-message {
            color: var(--error-color);
            margin-top: 5px;
            font-size: 0.9rem;
        }

        .success-message {
            color: var(--success-color);
            margin-top: 5px;
            font-size: 0.9rem;
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--card-bg);
            color: var(--text-color);
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 4px var(--shadow-color);
            font-size: 0.8rem;
            font-weight: normal;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .debt-list {
            margin-top: 20px;
        }

        .debt-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .debt-item:last-child {
            border-bottom: none;
        }

        .debt-info {
            flex: 1;
        }

        .debt-actions {
            display: flex;
            gap: 5px;
        }

        .debt-btn {
            background: none;
            border: none;
            color: var(--light-text);
            cursor: pointer;
            font-size: 1rem;
        }

        .debt-btn:hover {
            color: var(--primary-color);
        }

        .add-debt-btn {
            width: 100%;
            margin-top: 10px;
        }

        .amortization-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 0.9rem;
        }

        .amortization-table th, 
        .amortization-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .amortization-table th {
            background-color: rgba(78, 115, 223, 0.1);
            font-weight: 600;
        }

        .amortization-table tr:hover {
            background-color: rgba(78, 115, 223, 0.05);
        }

        .table-container {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
        }

        .tab-container {
            margin-bottom: 20px;
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab.active {
            border-bottom: 3px solid var(--primary-color);
            color: var(--primary-color);
            font-weight: 600;
        }

        .tab-content {
            display: none;
            padding: 20px 0;
        }

        .tab-content.active {
            display: block;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .input-group {
                flex-direction: column;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .result-grid {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-calculator"></i>
                <h1>Debt Payoff Pro</h1>
            </div>
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
                <span>Dark Mode</span>
            </button>
        </header>

        <div class="main-content">
            <div class="card">
                <h2><i class="fas fa-plus-circle"></i> Add Your Debts</h2>
                
                <div class="form-group">
                    <label for="debtType">Debt Type</label>
                    <select id="debtType" class="form-control">
                        <option value="credit-card">Credit Card</option>
                        <option value="personal-loan">Personal Loan</option>
                        <option value="student-loan">Student Loan</option>
                        <option value="mortgage">Mortgage</option>
                        <option value="auto-loan">Auto Loan</option>
                        <option value="medical-debt">Medical Debt</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="debtName">Debt Name (Optional)</label>
                    <input type="text" id="debtName" class="form-control" placeholder="e.g., Chase Visa, Student Loan">
                </div>
                
                <div class="form-group">
                    <label for="debtBalance">Current Balance ($)</label>
                    <input type="number" id="debtBalance" class="form-control" placeholder="1000" min="0" step="0.01">
                </div>
                
                <div class="form-group">
                    <label for="debtApr">Interest Rate (APR)</label>
                    <div class="input-group">
                        <input type="number" id="debtApr" class="form-control" placeholder="15.99" min="0" max="100" step="0.01">
                        <span class="input-group-addon">%</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="debtMinPayment">Minimum Monthly Payment ($)</label>
                    <input type="number" id="debtMinPayment" class="form-control" placeholder="25" min="0" step="0.01">
                </div>
                
                <div class="form-group">
                    <label for="extraPayment">Extra Monthly Payment ($)</label>
                    <input type="number" id="extraPayment" class="form-control" placeholder="0" min="0" step="0.01">
                </div>
                
                <button id="addDebtBtn" class="btn btn-warning">
                    <i class="fas fa-plus"></i> Add Debt
                </button>
                
                <div class="debt-list" id="debtList">
                    <!-- Debt items will be added here -->
                    <div class="empty-state" style="text-align: center; padding: 20px; color: var(--light-text);">
                        <i class="fas fa-money-bill-wave" style="font-size: 2rem; margin-bottom: 10px;"></i>
                        <p>No debts added yet. Add your first debt to get started.</p>
                    </div>
                </div>
                
                <div class="ad-container">
                    <div class="ad-label">Advertisement</div>
                    <!-- Adsterra Ad Space -->
                    <div id="adsterra-ad">
                        <!-- Adsterra ad code will be inserted here -->
                        <div style="padding: 20px; background: rgba(78, 115, 223, 0.1); border-radius: 5px; text-align: center;">
                            <p>Adsterra Ad Space</p>
                            <p style="font-size: 0.8em; color: var(--text-color); opacity: 0.7;">
                                This would contain your Adsterra ad code
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-calculator"></i> Payoff Strategy</h2>
                
                <div class="form-group">
                    <label for="payoffMethod">
                        Payoff Method 
                        <span class="tooltip">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltiptext">Choose between paying off high-interest debts first (Avalanche) or smallest balances first (Snowball).</span>
                        </span>
                    </label>
                    <select id="payoffMethod" class="form-control">
                        <option value="avalanche">Avalanche (Highest Interest First)</option>
                        <option value="snowball">Snowball (Smallest Balance First)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="lumpSum">Lump Sum Payment ($)</label>
                    <input type="number" id="lumpSum" class="form-control" placeholder="0" min="0" step="0.01">
                </div>
                
                <button id="calculateBtn" class="btn">
                    <i class="fas fa-calculator"></i> Calculate Payoff Plan
                </button>
                
                <div id="resultContainer" class="result-container" style="display: none;">
                    <h3>Payoff Summary</h3>
                    <div class="result-value" id="totalPayoffTime"></div>
                    
                    <div class="result-grid">
                        <div class="result-item">
                            <h3>Total Debt</h3>
                            <p id="totalDebt"></p>
                        </div>
                        <div class="result-item">
                            <h3>Total Interest</h3>
                            <p id="totalInterest"></p>
                        </div>
                        <div class="result-item">
                            <h3>Monthly Payment</h3>
                            <p id="monthlyPayment"></p>
                        </div>
                        <div class="result-item">
                            <h3>Interest Saved</h3>
                            <p id="interestSaved"></p>
                        </div>
                        <div class="result-item">
                            <h3>Payoff Date</h3>
                            <p id="payoffDate"></p>
                        </div>
                        <div class="result-item">
                            <h3>Time Saved</h3>
                            <p id="timeSaved"></p>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button id="showAmortizationBtn" class="btn btn-secondary">
                            <i class="fas fa-table"></i> Show Amortization
                        </button>
                        <button id="printBtn" class="btn btn-secondary">
                            <i class="fas fa-print"></i> Print
                        </button>
                        <button id="shareBtn" class="btn btn-secondary">
                            <i class="fas fa-share-alt"></i> Share
                        </button>
                    </div>
                </div>
                
                <div class="tab-container" id="amortizationContainer" style="display: none;">
                    <div class="tabs">
                        <div class="tab active" data-tab="amortization">Amortization Schedule</div>
                        <div class="tab" data-tab="payoff-order">Payoff Order</div>
                    </div>
                    <div class="tab-content active" id="amortization-tab">
                        <div class="table-container">
                            <table class="amortization-table" id="amortizationTable">
                                <thead>
                                    <tr>
                                        <th>Month</th>
                                        <th>Payment</th>
                                        <th>Principal</th>
                                        <th>Interest</th>
                                        <th>Remaining</th>
                                    </tr>
                                </thead>
                                <tbody id="amortizationBody">
                                    <!-- Amortization rows will be added here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="tab-content" id="payoff-order-tab">
                        <div class="table-container">
                            <table class="amortization-table" id="payoffOrderTable">
                                <thead>
                                    <tr>
                                        <th>Order</th>
                                        <th>Debt</th>
                                        <th>Payoff Month</th>
                                        <th>Interest Paid</th>
                                    </tr>
                                </thead>
                                <tbody id="payoffOrderBody">
                                    <!-- Payoff order rows will be added here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button id="exportPdfBtn" class="btn btn-secondary">
                            <i class="fas fa-file-pdf"></i> Export as PDF
                        </button>
                        <button id="exportExcelBtn" class="btn btn-secondary">
                            <i class="fas fa-file-excel"></i> Export as Excel
                        </button>
                        <button id="exportCsvBtn" class="btn btn-secondary">
                            <i class="fas fa-file-csv"></i> Export as CSV
                        </button>
                    </div>
                </div>
                
                <div class="ad-container">
                    <div class="ad-label">Advertisement</div>
                    <!-- Yllix Ad Space -->
                    <div id="yllix-ad">
                        <!-- Yllix ad code will be inserted here -->
                        <div style="padding: 20px; background: rgba(78, 115, 223, 0.1); border-radius: 5px; text-align: center;">
                            <p>Yllix Ad Space</p>
                            <p style="font-size: 0.8em; color: var(--text-color); opacity: 0.7;">
                                This would contain your Yllix ad code
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Debt Payoff Pro &copy; 2023 | Secure financial calculator tool</p>
            <p>Your data is processed locally and never sent to our servers.</p>
        </footer>
    </div>

    <script>
        // Global variables
        let debts = [];
        let amortizationSchedule = [];
        let payoffOrder = [];
        let totalPayoffMonths = 0;
        let totalInterestPaid = 0;
        let isDarkMode = false;
        
        // DOM elements
        const themeToggle = document.getElementById('themeToggle');
        const debtTypeSelect = document.getElementById('debtType');
        const debtNameInput = document.getElementById('debtName');
        const debtBalanceInput = document.getElementById('debtBalance');
        const debtAprInput = document.getElementById('debtApr');
        const debtMinPaymentInput = document.getElementById('debtMinPayment');
        const extraPaymentInput = document.getElementById('extraPayment');
        const addDebtBtn = document.getElementById('addDebtBtn');
        const debtList = document.getElementById('debtList');
        const payoffMethodSelect = document.getElementById('payoffMethod');
        const lumpSumInput = document.getElementById('lumpSum');
        const calculateBtn = document.getElementById('calculateBtn');
        const resultContainer = document.getElementById('resultContainer');
        const totalPayoffTime = document.getElementById('totalPayoffTime');
        const totalDebt = document.getElementById('totalDebt');
        const totalInterest = document.getElementById('totalInterest');
        const monthlyPayment = document.getElementById('monthlyPayment');
        const interestSaved = document.getElementById('interestSaved');
        const payoffDate = document.getElementById('payoffDate');
        const timeSaved = document.getElementById('timeSaved');
        const showAmortizationBtn = document.getElementById('showAmortizationBtn');
        const printBtn = document.getElementById('printBtn');
        const shareBtn = document.getElementById('shareBtn');
        const amortizationContainer = document.getElementById('amortizationContainer');
        const amortizationBody = document.getElementById('amortizationBody');
        const payoffOrderBody = document.getElementById('payoffOrderBody');
        const exportPdfBtn = document.getElementById('exportPdfBtn');
        const exportExcelBtn = document.getElementById('exportExcelBtn');
        const exportCsvBtn = document.getElementById('exportCsvBtn');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Load any saved debts from localStorage
            loadSavedDebts();
            
            // Theme toggle
            themeToggle.addEventListener('click', toggleTheme);
            
            // Check for saved theme preference
            checkThemePreference();
            
            // Event listeners
            addDebtBtn.addEventListener('click', addDebt);
            calculateBtn.addEventListener('click', calculatePayoffPlan);
            showAmortizationBtn.addEventListener('click', showAmortization);
            printBtn.addEventListener('click', printResults);
            shareBtn.addEventListener('click', shareResults);
            exportPdfBtn.addEventListener('click', exportAsPdf);
            exportExcelBtn.addEventListener('click', exportAsExcel);
            exportCsvBtn.addEventListener('click', exportAsCsv);
            
            // Tab switching
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
            
            // Initialize ads (these would be replaced with actual ad codes)
            initializeAds();
        });
        
        // Function to add a new debt
        function addDebt() {
            const type = debtTypeSelect.value;
            const name = debtNameInput.value || `${type.charAt(0).toUpperCase() + type.slice(1).replace('-', ' ')} ${debts.length + 1}`;
            const balance = parseFloat(debtBalanceInput.value);
            const apr = parseFloat(debtAprInput.value);
            const minPayment = parseFloat(debtMinPaymentInput.value);
            const extraPayment = parseFloat(extraPaymentInput.value) || 0;
            
            // Validate inputs
            if (isNaN(balance)) {
                showError('Please enter a valid balance', 'debtBalance');
                return;
            }
            
            if (isNaN(apr)) {
                showError('Please enter a valid APR', 'debtApr');
                return;
            }
            
            if (isNaN(minPayment)) {
                showError('Please enter a valid minimum payment', 'debtMinPayment');
                return;
            }
            
            if (balance <= 0) {
                showError('Balance must be greater than 0', 'debtBalance');
                return;
            }
            
            if (apr < 0) {
                showError('APR cannot be negative', 'debtApr');
                return;
            }
            
            if (minPayment <= 0) {
                showError('Minimum payment must be greater than 0', 'debtMinPayment');
                return;
            }
            
            // Create debt object
            const debt = {
                id: Date.now(),
                type,
                name,
                balance,
                apr,
                minPayment,
                extraPayment,
                originalBalance: balance,
                paidOff: false,
                payoffMonth: null,
                totalInterest: 0
            };
            
            // Add to debts array
            debts.push(debt);
            
            // Save to localStorage
            saveDebts();
            
            // Update UI
            renderDebtList();
            
            // Clear form
            debtNameInput.value = '';
            debtBalanceInput.value = '';
            debtAprInput.value = '';
            debtMinPaymentInput.value = '';
            extraPaymentInput.value = '';
            
            // Hide result container if it was showing
            resultContainer.style.display = 'none';
            amortizationContainer.style.display = 'none';
        }
        
        // Function to render the debt list
        function renderDebtList() {
            if (debts.length === 0) {
                debtList.innerHTML = `
                    <div class="empty-state" style="text-align: center; padding: 20px; color: var(--light-text);">
                        <i class="fas fa-money-bill-wave" style="font-size: 2rem; margin-bottom: 10px;"></i>
                        <p>No debts added yet. Add your first debt to get started.</p>
                    </div>
                `;
                return;
            }
            
            debtList.innerHTML = '';
            
            let totalBalance = 0;
            let totalMinPayment = 0;
            
            debts.forEach(debt => {
                totalBalance += debt.balance;
                totalMinPayment += debt.minPayment;
                
                const debtItem = document.createElement('div');
                debtItem.className = 'debt-item';
                debtItem.dataset.id = debt.id;
                
                debtItem.innerHTML = `
                    <div class="debt-info">
                        <strong>${debt.name}</strong>
                        <div style="font-size: 0.8rem; color: var(--light-text);">
                            $${debt.balance.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})} 
                            at ${debt.apr.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}% APR
                        </div>
                    </div>
                    <div class="debt-actions">
                        <button class="debt-btn edit-debt" title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="debt-btn delete-debt" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                debtList.appendChild(debtItem);
            });
            
            // Add total row
            const totalItem = document.createElement('div');
            totalItem.className = 'debt-item';
            totalItem.style.borderTop = '2px solid var(--border-color)';
            totalItem.style.fontWeight = '600';
            
            totalItem.innerHTML = `
                <div class="debt-info">
                    <strong>Total</strong>
                </div>
                <div>
                    $${totalBalance.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2}) | 
                    $${totalMinPayment.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}/mo
                </div>
            `;
            
            debtList.appendChild(totalItem);
            
            // Add event listeners for edit and delete buttons
            document.querySelectorAll('.edit-debt').forEach(btn => {
                btn.addEventListener('click', function() {
                    const debtId = parseInt(this.closest('.debt-item').dataset.id);
                    editDebt(debtId);
                });
            });
            
            document.querySelectorAll('.delete-debt').forEach(btn => {
                btn.addEventListener('click', function() {
                    const debtId = parseInt(this.closest('.debt-item').dataset.id);
                    deleteDebt(debtId);
                });
            });
        }
        
        // Function to edit a debt
        function editDebt(debtId) {
            const debtIndex = debts.findIndex(d => d.id === debtId);
            if (debtIndex === -1) return;
            
            const debt = debts[debtIndex];
            
            // Fill the form with the debt's data
            debtTypeSelect.value = debt.type;
            debtNameInput.value = debt.name;
            debtBalanceInput.value = debt.balance;
            debtAprInput.value = debt.apr;
            debtMinPaymentInput.value = debt.minPayment;
            extraPaymentInput.value = debt.extraPayment;
            
            // Remove the debt from the array
            debts.splice(debtIndex, 1);
            
            // Update the UI
            renderDebtList();
            
            // Hide result container if it was showing
            resultContainer.style.display = 'none';
            amortizationContainer.style.display = 'none';
        }
        
        // Function to delete a debt
        function deleteDebt(debtId) {
            debts = debts.filter(d => d.id !== debtId);
            saveDebts();
            renderDebtList();
            
            // Hide result container if it was showing
            resultContainer.style.display = 'none';
            amortizationContainer.style.display = 'none';
        }
        
        // Function to save debts to localStorage
        function saveDebts() {
            localStorage.setItem('debts', JSON.stringify(debts));
        }
        
        // Function to load saved debts from localStorage
        function loadSavedDebts() {
            const savedDebts = localStorage.getItem('debts');
            if (savedDebts) {
                debts = JSON.parse(savedDebts);
                renderDebtList();
            }
        }
        
        // Function to calculate debt payoff plan
        function calculatePayoffPlan() {
            if (debts.length === 0) {
                showError('Please add at least one debt to calculate');
                return;
            }
            
            const payoffMethod = payoffMethodSelect.value;
            const lumpSum = parseFloat(lumpSumInput.value) || 0;
            
            // Validate inputs
            if (isNaN(lumpSum)) {
                showError('Please enter a valid lump sum amount', 'lumpSum');
                return;
            }
            
            if (lumpSum < 0) {
                showError('Lump sum cannot be negative', 'lumpSum');
                return;
            }
            
            calculateBtn.innerHTML = '<span class="loading"></span> Calculating...';
            calculateBtn.disabled = true;
            
            // Reset debt states
            debts.forEach(debt => {
                debt.balance = debt.originalBalance;
                debt.paidOff = false;
                debt.payoffMonth = null;
                debt.totalInterest = 0;
            });
            
            // Apply lump sum payment
            let remainingLumpSum = lumpSum;
            if (payoffMethod === 'avalanche') {
                // Pay highest interest debts first
                debts.sort((a, b) => b.apr - a.apr);
            } else {
                // Pay smallest balances first (snowball)
                debts.sort((a, b) => a.balance - b.balance);
            }
            
            for (const debt of debts) {
                if (remainingLumpSum <= 0) break;
                
                const payment = Math.min(remainingLumpSum, debt.balance);
                debt.balance -= payment;
                remainingLumpSum -= payment;
                
                if (debt.balance <= 0) {
                    debt.paidOff = true;
                    debt.payoffMonth = 0;
                }
            }
            
            // Calculate payoff plan
            amortizationSchedule = [];
            payoffOrder = [];
            totalPayoffMonths = 0;
            totalInterestPaid = 0;
            
            let month = 0;
            let totalPaidOff = 0;
            const totalDebts = debts.length;
            
            while (totalPaidOff < totalDebts) {
                month++;
                let totalPayment = 0;
                let totalPrincipal = 0;
                let totalInterest = 0;
                
                // Determine which debts are still active
                const activeDebts = debts.filter(d => !d.paidOff);
                
                // Distribute payments according to the selected method
                if (payoffMethod === 'avalanche') {
                    activeDebts.sort((a, b) => b.apr - a.apr);
                } else {
                    activeDebts.sort((a, b) => a.balance - b.balance);
                }
                
                // Calculate total available payment for this month
                let availablePayment = activeDebts.reduce((sum, debt) => sum + debt.minPayment + debt.extraPayment, 0);
                
                // Pay each debt in order
                for (const debt of activeDebts) {
                    if (availablePayment <= 0) break;
                    
                    const monthlyRate = debt.apr / 100 / 12;
                    const interest = debt.balance * monthlyRate;
                    const minPayment = debt.minPayment;
                    const extraPayment = debt.extraPayment;
                    const totalDebtPayment = minPayment + extraPayment;
                    
                    // Calculate how much we can pay towards this debt
                    const payment = Math.min(availablePayment, totalDebtPayment);
                    const principal = Math.min(payment - interest, debt.balance);
                    
                    // Apply payment
                    debt.balance -= principal;
                    debt.totalInterest += interest;
                    
                    totalPayment += payment;
                    totalPrincipal += principal;
                    totalInterest += interest;
                    
                    availablePayment -= payment;
                    
                    // Check if debt is paid off
                    if (debt.balance <= 0) {
                        debt.paidOff = true;
                        debt.payoffMonth = month;
                        totalPaidOff++;
                        
                        // Add to payoff order
                        payoffOrder.push({
                            name: debt.name,
                            payoffMonth: month,
                            totalInterest: debt.totalInterest
                        });
                    }
                }
                
                // Add to amortization schedule
                amortizationSchedule.push({
                    month,
                    payment: totalPayment,
                    principal: totalPrincipal,
                    interest: totalInterest,
                    remainingDebts: totalDebts - totalPaidOff
                });
                
                // Track total interest
                totalInterestPaid += totalInterest;
                
                // Prevent infinite loop
                if (month > 1200) break; // Cap at 100 years
            }
            
            totalPayoffMonths = month;
            
            // Calculate total debt
            const totalDebtAmount = debts.reduce((sum, debt) => sum + debt.originalBalance, 0);
            
            // Calculate interest if making only minimum payments (for comparison)
            let minPaymentInterest = 0;
            debts.forEach(debt => {
                const monthlyRate = debt.apr / 100 / 12;
                let balance = debt.originalBalance;
                let months = 0;
                
                while (balance > 0 && months < 1200) {
                    months++;
                    const interest = balance * monthlyRate;
                    minPaymentInterest += interest;
                    const principal = Math.min(debt.minPayment - interest, balance);
                    balance -= principal;
                }
            });
            
            const interestSavingsAmount = minPaymentInterest - totalInterestPaid;
            
            // Calculate payoff date
            const today = new Date();
            const payoffDateObj = new Date(today);
            payoffDateObj.setMonth(payoffDateObj.getMonth() + totalPayoffMonths);
            
            // Update UI with results
            totalPayoffTime.textContent = `${totalPayoffMonths} months (${Math.floor(totalPayoffMonths / 12)} years ${totalPayoffMonths % 12} months)`;
            totalDebt.textContent = formatCurrency(totalDebtAmount);
            totalInterest.textContent = formatCurrency(totalInterestPaid);
            monthlyPayment.textContent = formatCurrency(amortizationSchedule[0]?.payment || 0);
            interestSaved.textContent = formatCurrency(interestSavingsAmount);
            payoffDate.textContent = payoffDateObj.toLocaleDateString();
            timeSaved.textContent = 'N/A'; // Could be calculated vs. minimum payments
            
            // Show results
            resultContainer.style.display = 'block';
            
            calculateBtn.innerHTML = '<i class="fas fa-calculator"></i> Calculate Payoff Plan';
            calculateBtn.disabled = false;
        }
        
        // Function to show amortization schedule
        function showAmortization() {
            // Clear previous tables
            amortizationBody.innerHTML = '';
            payoffOrderBody.innerHTML = '';
            
            // Populate amortization table
            amortizationSchedule.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${row.month}</td>
                    <td>${formatCurrency(row.payment)}</td>
                    <td>${formatCurrency(row.principal)}</td>
                    <td>${formatCurrency(row.interest)}</td>
                    <td>${row.remainingDebts}</td>
                `;
                amortizationBody.appendChild(tr);
            });
            
            // Populate payoff order table
            payoffOrder.forEach((item, index) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${item.name}</td>
                    <td>${item.payoffMonth}</td>
                    <td>${formatCurrency(item.totalInterest)}</td>
                `;
                payoffOrderBody.appendChild(tr);
            });
            
            // Show the container
            amortizationContainer.style.display = 'block';
            
            // Scroll to the amortization section
            amortizationContainer.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Function to print results
        function printResults() {
            if (resultContainer.style.display !== 'block') {
                showError('Nothing to print. Please calculate payoff plan first.');
                return;
            }
            
            const printWindow = window.open('', '', 'width=800,height=600');
            printWindow.document.write(`
                <html>
                    <head>
                        <title>Debt Payoff Results</title>
                        <style>
                            body { font-family: Arial, sans-serif; padding: 20px; }
                            h1 { color: #4e73df; }
                            .result { font-size: 1.2em; margin: 20px 0; }
                            .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0; }
                            .grid-item { padding: 10px; border-radius: 5px; background-color: #f8f9fc; }
                            .grid-item h3 { font-size: 0.9rem; color: #6c757d; margin-bottom: 5px; }
                            .footer { margin-top: 30px; font-size: 0.8em; color: #6c757d; }
                            @media print {
                                .no-print { display: none; }
                            }
                        </style>
                    </head>
                    <body>
                        <h1>Debt Payoff Results</h1>
                        <div class="result">
                            <strong>Total Payoff Time:</strong> ${totalPayoffTime.textContent}
                        </div>
                        
                        <div class="grid">
                            <div class="grid-item">
                                <h3>Total Debt</h3>
                                <p>${totalDebt.textContent}</p>
                            </div>
                            <div class="grid-item">
                                <h3>Total Interest</h3>
                                <p>${totalInterest.textContent}</p>
                            </div>
                            <div class="grid-item">
                                <h3>Monthly Payment</h3>
                                <p>${monthlyPayment.textContent}</p>
                            </div>
                            <div class="grid-item">
                                <h3>Interest Saved</h3>
                                <p>${interestSaved.textContent}</p>
                            </div>
                            <div class="grid-item">
                                <h3>Payoff Date</h3>
                                <p>${payoffDate.textContent}</p>
                            </div>
                            <div class="grid-item">
                                <h3>Time Saved</h3>
                                <p>${timeSaved.textContent}</p>
                            </div>
                        </div>
                        
                        <div class="footer">
                            Printed from Debt Payoff Pro on ${new Date().toLocaleString()}
                        </div>
                        
                        <button class="no-print" onclick="window.print()" style="padding: 10px 20px; background: #4e73df; color: white; border: none; border-radius: 5px; cursor: pointer;">
                            Print This Page
                        </button>
                    </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.focus();
        }
        
        // Function to share results
        function shareResults() {
            if (resultContainer.style.display !== 'block') {
                showError('Nothing to share. Please calculate payoff plan first.');
                return;
            }
            
            const shareText = `Debt Payoff Results:\n\n` +
                `Total Payoff Time: ${totalPayoffTime.textContent}\n` +
                `Total Debt: ${totalDebt.textContent}\n` +
                `Total Interest: ${totalInterest.textContent}\n` +
                `Monthly Payment: ${monthlyPayment.textContent}\n` +
                `Interest Saved: ${interestSaved.textContent}\n` +
                `Payoff Date: ${payoffDate.textContent}\n\n` +
                `Calculated using Debt Payoff Pro`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Debt Payoff Results',
                    text: shareText,
                    url: window.location.href
                }).catch(err => {
                    console.log('Error sharing:', err);
                    fallbackShare(shareText);
                });
            } else {
                fallbackShare(shareText);
            }
        }
        
        // Fallback share function
        function fallbackShare(shareText) {
            // Create a temporary input element
            const input = document.createElement('input');
            input.value = shareText;
            document.body.appendChild(input);
            input.select();
            document.execCommand('copy');
            document.body.removeChild(input);
            
            alert('Results copied to clipboard!\n\n' + shareText);
        }
        
        // Function to export as PDF
        function exportAsPdf() {
            if (amortizationContainer.style.display !== 'block') {
                showError('Nothing to export. Please show amortization first.');
                return;
            }
            
            // Create a new PDF document
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add title
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(20);
            doc.setTextColor(78, 115, 223);
            doc.text('Debt Payoff Amortization Schedule', 105, 20, { align: 'center' });
            
            // Add summary
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            
            let y = 40;
            
            doc.text(`Total Payoff Time: ${totalPayoffTime.textContent}`, 14, y);
            y += 8;
            doc.text(`Total Debt: ${totalDebt.textContent}`, 14, y);
            y += 8;
            doc.text(`Total Interest: ${totalInterest.textContent}`, 14, y);
            y += 8;
            doc.text(`Monthly Payment: ${monthlyPayment.textContent}`, 14, y);
            y += 8;
            doc.text(`Interest Saved: ${interestSaved.textContent}`, 14, y);
            y += 8;
            doc.text(`Payoff Date: ${payoffDate.textContent}`, 14, y);
            y += 15;
            
            // Add amortization table
            doc.setFontSize(10);
            
            // Table headers
            doc.setFillColor(78, 115, 223);
            doc.setTextColor(255, 255, 255);
            doc.rect(14, y, 180, 8, 'F');
            doc.text('Month', 20, y + 6);
            doc.text('Payment', 50, y + 6);
            doc.text('Principal', 80, y + 6);
            doc.text('Interest', 110, y + 6);
            doc.text('Remaining Debts', 140, y + 6);
            y += 8;
            
            // Table rows
            doc.setTextColor(0, 0, 0);
            let rowsAdded = 0;
            
            amortizationSchedule.forEach((row, index) => {
                if (y > 270 && index < amortizationSchedule.length - 1) {
                    doc.addPage();
                    y = 20;
                    
                    // Add headers on new page
                    doc.setFillColor(78, 115, 223);
                    doc.setTextColor(255, 255, 255);
                    doc.rect(14, y, 180, 8, 'F');
                    doc.text('Month', 20, y + 6);
                    doc.text('Payment', 50, y + 6);
                    doc.text('Principal', 80, y + 6);
                    doc.text('Interest', 110, y + 6);
                    doc.text('Remaining Debts', 140, y + 6);
                    y += 8;
                    doc.setTextColor(0, 0, 0);
                }
                
                doc.text(row.month.toString(), 20, y + 6);
                doc.text(formatCurrency(row.payment), 50, y + 6);
                doc.text(formatCurrency(row.principal), 80, y + 6);
                doc.text(formatCurrency(row.interest), 110, y + 6);
                doc.text(row.remainingDebts.toString(), 140, y + 6);
                y += 8;
                rowsAdded++;
            });
            
            // Add payoff order table on a new page
            doc.addPage();
            y = 20;
            
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(16);
            doc.text('Debt Payoff Order', 105, y, { align: 'center' });
            y += 15;
            
            doc.setFontSize(10);
            
            // Table headers
            doc.setFillColor(78, 115, 223);
            doc.setTextColor(255, 255, 255);
            doc.rect(14, y, 180, 8, 'F');
            doc.text('Order', 20, y + 6);
            doc.text('Debt', 50, y + 6);
            doc.text('Payoff Month', 110, y + 6);
            doc.text('Interest Paid', 150, y + 6);
            y += 8;
            
            // Table rows
            doc.setTextColor(0, 0, 0);
            
            payoffOrder.forEach((item, index) => {
                if (y > 270 && index < payoffOrder.length - 1) {
                    doc.addPage();
                    y = 20;
                    
                    // Add headers on new page
                    doc.setFillColor(78, 115, 223);
                    doc.setTextColor(255, 255, 255);
                    doc.rect(14, y, 180, 8, 'F');
                    doc.text('Order', 20, y + 6);
                    doc.text('Debt', 50, y + 6);
                    doc.text('Payoff Month', 110, y + 6);
                    doc.text('Interest Paid', 150, y + 6);
                    y += 8;
                    doc.setTextColor(0, 0, 0);
                }
                
                doc.text((index + 1).toString(), 20, y + 6);
                doc.text(item.name, 50, y + 6);
                doc.text(item.payoffMonth.toString(), 110, y + 6);
                doc.text(formatCurrency(item.totalInterest), 150, y + 6);
                y += 8;
            });
            
            // Add footer
            doc.setFontSize(10);
            doc.text(`Exported from Debt Payoff Pro on ${new Date().toLocaleString()}`, 105, 287, { align: 'center' });
            
            // Save the PDF
            doc.save('Debt_Payoff_Plan.pdf');
        }
        
        // Function to export as Excel
        function exportAsExcel() {
            if (amortizationContainer.style.display !== 'block') {
                showError('Nothing to export. Please show amortization first.');
                return;
            }
            
            // Create workbook
            const wb = XLSX.utils.book_new();
            
            // Add summary sheet
            const summaryData = [
                ['Debt Payoff Summary', ''],
                ['Total Payoff Time', totalPayoffTime.textContent],
                ['Total Debt', totalDebt.textContent],
                ['Total Interest', totalInterest.textContent],
                ['Monthly Payment', monthlyPayment.textContent],
                ['Interest Saved', interestSaved.textContent],
                ['Payoff Date', payoffDate.textContent],
                ['', ''],
                ['Exported on', new Date().toLocaleString()],
                ['Source', 'Debt Payoff Pro']
            ];
            
            const summaryWs = XLSX.utils.aoa_to_sheet(summaryData);
            XLSX.utils.book_append_sheet(wb, summaryWs, 'Summary');
            
            // Add amortization sheet
            const amortizationData = [
                ['Month', 'Payment', 'Principal', 'Interest', 'Remaining Debts']
            ];
            
            amortizationSchedule.forEach(row => {
                amortizationData.push([
                    row.month,
                    row.payment,
                    row.principal,
                    row.interest,
                    row.remainingDebts
                ]);
            });
            
            const amortizationWs = XLSX.utils.aoa_to_sheet(amortizationData);
            XLSX.utils.book_append_sheet(wb, amortizationWs, 'Amortization');
            
            // Add payoff order sheet
            const payoffOrderData = [
                ['Order', 'Debt', 'Payoff Month', 'Interest Paid']
            ];
            
            payoffOrder.forEach((item, index) => {
                payoffOrderData.push([
                    index + 1,
                    item.name,
                    item.payoffMonth,
                    item.totalInterest
                ]);
            });
            
            const payoffOrderWs = XLSX.utils.aoa_to_sheet(payoffOrderData);
            XLSX.utils.book_append_sheet(wb, payoffOrderWs, 'Payoff Order');
            
            // Save the Excel file
            XLSX.writeFile(wb, 'Debt_Payoff_Plan.xlsx');
        }
        
        // Function to export as CSV
        function exportAsCsv() {
            if (amortizationContainer.style.display !== 'block') {
                showError('Nothing to export. Please show amortization first.');
                return;
            }
            
            // Create CSV content for amortization
            let csvContent = 'Month,Payment,Principal,Interest,Remaining Debts\n';
            
            amortizationSchedule.forEach(row => {
                csvContent += `${row.month},${row.payment},${row.principal},${row.interest},${row.remainingDebts}\n`;
            });
            
            // Add separator
            csvContent += '\n\nPayoff Order\nOrder,Debt,Payoff Month,Interest Paid\n';
            
            // Add payoff order data
            payoffOrder.forEach((item, index) => {
                csvContent += `${index + 1},${item.name},${item.payoffMonth},${item.totalInterest}\n`;
            });
            
            // Create blob and download
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.setAttribute('href', url);
            link.setAttribute('download', 'Debt_Payoff_Plan.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        // Function to toggle between tabs
        function switchTab(tabId) {
            tabs.forEach(tab => {
                if (tab.getAttribute('data-tab') === tabId) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            tabContents.forEach(content => {
                if (content.id === `${tabId}-tab`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
        }
        
        // Function to toggle theme
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            
            isDarkMode = document.body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDarkMode);
            
            if (isDarkMode) {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i> <span>Light Mode</span>';
            } else {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i> <span>Dark Mode</span>';
            }
        }
        
        // Function to check for saved theme preference
        function checkThemePreference() {
            const savedMode = localStorage.getItem('darkMode');
            isDarkMode = savedMode === 'true';
            
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i> <span>Light Mode</span>';
            }
        }
        
        // Function to show error message
        function showError(message, elementId = null) {
            // Remove any existing error messages
            document.querySelectorAll('.error-message').forEach(el => el.remove());
            
            const errorElement = document.createElement('div');
            errorElement.className = 'error-message';
            errorElement.textContent = message;
            
            if (elementId) {
                // Insert after the specific form element
                const element = document.getElementById(elementId);
                element.parentNode.insertBefore(errorElement, element.nextSibling);
            } else {
                // Insert at the top of the calculator card
                const calculatorCard = document.querySelector('.main-content > .card:last-child');
                calculatorCard.insertBefore(errorElement, calculatorCard.firstChild);
            }
            
            setTimeout(() => {
                errorElement.remove();
            }, 5000);
        }
        
        // Function to format currency
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(amount);
        }
        
        // Function to initialize ads (placeholder for actual ad code)
        function initializeAds() {
            // This is where you would insert your actual ad codes
            // For demonstration, we'll just show placeholders
            
            const adsterraAd = document.getElementById('adsterra-ad');
            adsterraAd.innerHTML = `
                <div style="padding: 20px; background: rgba(78, 115, 223, 0.1); border-radius: 5px; text-align: center;">
                    <p>Adsterra Ad Space</p>
                    <p style="font-size: 0.8em; color: var(--text-color); opacity: 0.7;">
                        This would contain your Adsterra ad code
                    </p>
                </div>
            `;
            
            const yllixAd = document.getElementById('yllix-ad');
            yllixAd.innerHTML = `
                <div style="padding: 20px; background: rgba(78, 115, 223, 0.1); border-radius: 5px; text-align: center;">
                    <p>Yllix Ad Space</p>
                    <p style="font-size: 0.8em; color: var(--text-color); opacity: 0.7;">
                        This would contain your Yllix ad code
                    </p>
                </div>
            `;
        }
        
        // Font Awesome icons (embedded as we're not using external dependencies)
        const faIcons = `
        <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
            <symbol id="fas-calculator" viewBox="0 0 448 512">
                <path d="M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32zm0-96c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32zm0-96c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32zm96 192c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32zm0-96c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32zm0-96c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32zm160 192c0 8.8-7.2 16-16 16h-96c-8.8 0-16-7.2-16-16v-96c0-8.8 7.2-16 16-16h96c8.8 0 16 7.2 16 16v96zm-16-160h-96v96h96v-96z"/>
            </symbol>
            <symbol id="fas-plus-circle" viewBox="0 0 512 512">
                <path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"/>
            </symbol>
            <symbol id="fas-moon" viewBox="0 0 512 512">
                <path d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"/>
            </symbol>
            <symbol id="fas-sun" viewBox="0 0 512 512">
                <path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"/>
            </symbol>
            <symbol id="fas-plus" viewBox="0 0 448 512">
                <path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/>
            </symbol>
            <symbol id="fas-edit" viewBox="0 0 576 512">
                <path d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"/>
            </symbol>
            <symbol id="fas-trash" viewBox="0 0 448 512">
                <path d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"/>
            </symbol>
            <symbol id="fas-table" viewBox="0 0 512 512">
                <path d="M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z"/>
            </symbol>
            <symbol id="fas-print" viewBox="0 0 512 512">
                <path d="M448 192H64v-77.3c0-8.5 3.4-16.6 9.4-22.6L93.3 56.6c6-6 14.1-9.4 22.6-9.4H240v32H128v64h320v-32zm-64 96H128v-32h256v32zm64-160H64v-32h384v32zM128 256h256v160H128V256zm-32 0v160H64V256h32zm-32 0H32v160c0 17.7 14.3 32 32 32h32v-32H32V256zm448 32v128h-32v32h32c17.7 0 32-14.3 32-32V256h-32zm0-32h32v-32h-32v32z"/>
            </symbol>
            <symbol id="fas-share-alt" viewBox="0 0 448 512">
                <path d="M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z"/>
            </symbol>
            <symbol id="fas-file-pdf" viewBox="0 0 384 512">
                <path d="M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.3 10.7 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z"/>
            </symbol>
            <symbol id="fas-file-excel" viewBox="0 0 384 512">
                <path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm60.1 106.5L224 336l60.1 93.5c5.1 8-.6 18.5-10.1 18.5h-34.9c-4.4 0-8.5-2.4-10.6-6.3C208.9 405.5 192 373 192 373c-6.4 14.8-10 20-36.6 68.8-2.1 3.9-6.1 6.3-10.5 6.3H110c-9.5 0-15.2-10.5-10.1-18.5l60.1-93.5-60.1-93.5c-5.2-8 .6-18.5 10.1-18.5h34.8c4.4 0 8.5 2.4 10.6 6.3 26.1 48.8 20 33.6 36.6 68.5 0 0 6.1-11.7 36.6-68.5 2.1-3.9 6.2-6.3 10.6-6.3H274c9.5-.1 15.2 10.4 10.1 18.4zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"/>
            </symbol>
            <symbol id="fas-file-csv" viewBox="0 0 384 512">
                <path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm-96 144c0 4.4-3.6 8-8 8h-8c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h8c4.4 0 8 3.6 8 8v48zm32 0c0 4.4-3.6 8-8 8h-8c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h8c4.4 0 8 3.6 8 8v48zm32 0c0 4.4-3.6 8-8 8h-8c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h8c4.4 0 8 3.6 8 8v48zm80-140h-56v-16h56c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8zm0 84h-56v-16h56c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8zm0 84h-56v-16h56c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8zm0 84h-56v-16h56c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8zm-168-96c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16v-96c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16v96zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"/>
            </symbol>
            <symbol id="fas-info-circle" viewBox="0 0 512 512">
                <path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/>
            </symbol>
            <symbol id="fas-money-bill-wave" viewBox="0 0 640 512">
                <path d="M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62-15.63 0-31.25 9.09-40.9 27.77-4.38 8.43-7.58 16.96-9.32 26.01H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h16c0 53.02 42.98 96 96 96h384c53.02 0 96-42.98 96-96h16c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48h-16.87c3.49-10.05 8.38-19.8 14.87-29.33 11.66-16.83 26.38-26.16 42.16-27.21zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 64c0 17.67-14.33 32-32 32H80c-17.67 0-32-14.33-32-32v-48h225.48c-2.07 7.07-3.48 14.32-3.48 21.83 0 43.27 28.72 78.65 67.83 85.96-7.61 3.09-15.68 4.62-23.83 4.62-26.51 0-48-21.49-48-48V240h32v224c0 8.84 7.16 16 16 16s16-7.16 16-16v-16h256v48z"/>
            </symbol>
            <symbol id="fas-chart-line" viewBox="0 0 512 512">
                <path d="M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"/>
            </symbol>
        </svg>
        `;
        
        // Add the SVG definitions to the body
        document.body.insertAdjacentHTML('afterbegin', faIcons);
        
        // Replace all <i> elements with SVG icons
        document.querySelectorAll('i').forEach(icon => {
            const iconName = icon.className.replace('fas fa-', '');
            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('class', 'svg-inline--fa');
            svg.setAttribute('aria-hidden', 'true');
            svg.setAttribute('focusable', 'false');
            svg.setAttribute('role', 'img');
            svg.setAttribute('viewBox', '0 0 512 512');
            
            const use = document.createElementNS('http://www.w3.org/2000/svg', 'use');
            use.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', `#fas-${iconName}`);
            
            svg.appendChild(use);
            icon.replaceWith(svg);
        });
    </script>
</body>
</html>
